# {{.ProjectName}}

A Go web API built with **Clean Architecture** principles, providing a maintainable and testable foundation for enterprise applications.

## ğŸ—ï¸ Architecture

This project follows **Clean Architecture** (also known as Onion Architecture) with clear separation of concerns:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Frameworks & Drivers                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              Interface Adapters                     â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚  â”‚  â”‚                Use Cases                    â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”‚            Entities                 â”‚   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”‚                                     â”‚   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  Business Rules & Domain Logic      â”‚   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â”‚                                     â”‚   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚                                             â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  Application Business Rules                 â”‚   â”‚    â”‚
â”‚  â”‚  â”‚                                             â”‚   â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚  â”‚                                                     â”‚    â”‚
â”‚  â”‚  Controllers, Presenters, Gateways                 â”‚    â”‚
â”‚  â”‚                                                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â”‚  Web, Database, External Services                          â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Layer Details

#### ğŸ”¹ **Entities** (`internal/domain/entities/`)
- Core business objects with domain logic
- Independent of external frameworks
- Contains business rules and validation

#### ğŸ”¹ **Use Cases** (`internal/domain/usecases/`)
- Application-specific business rules
- Orchestrates data flow between entities
- Independent of UI and persistence details

#### ğŸ”¹ **Interface Adapters** (`internal/adapters/`)
- **Controllers**: Convert HTTP requests to use case calls
- **Presenters**: Format responses for the web
- Bridge between use cases and external world

#### ğŸ”¹ **Frameworks & Drivers** (`internal/infrastructure/`)
- **Web Framework**: Gin HTTP router and middleware
- **Database**: {{.DatabaseDriver | title}} with GORM
- **External Services**: Email, authentication, logging

## ğŸš€ Features

- âœ… **Clean Architecture** with proper dependency direction
- âœ… **{{.Framework | title}} Web Framework** with middleware support
- âœ… **{{.Logger | title}} Logging** with structured output
{{if ne .DatabaseDriver ""}}
- âœ… **{{.DatabaseDriver | title}} Database** with GORM ORM
{{end}}
{{if ne .AuthType ""}}
- âœ… **{{.AuthType | upper}} Authentication** with session management
{{end}}
- âœ… **Dependency Injection** container
- âœ… **Graceful Shutdown** handling
- âœ… **Health Checks** (health, readiness, liveness)
- âœ… **CORS Support** with configurable origins
- âœ… **Security Headers** and middleware
- âœ… **Request Logging** with structured format
- âœ… **Error Handling** with recovery middleware
- âœ… **Configuration Management** with Viper
- âœ… **Docker Support** with multi-stage builds

## ğŸ“ Project Structure

```
{{.ProjectName}}/
â”œâ”€â”€ cmd/server/              # Application entry point
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ domain/              # Business logic (inner layers)
â”‚   â”‚   â”œâ”€â”€ entities/        # Core business objects
â”‚   â”‚   â”œâ”€â”€ usecases/        # Application business rules
â”‚   â”‚   â””â”€â”€ ports/           # Interfaces (contracts)
â”‚   â”œâ”€â”€ adapters/            # Interface adapters
â”‚   â”‚   â”œâ”€â”€ controllers/     # HTTP request handlers
â”‚   â”‚   â””â”€â”€ presenters/      # Response formatters
â”‚   â””â”€â”€ infrastructure/      # Frameworks & drivers (outer layer)
â”‚       â”œâ”€â”€ config/          # Configuration management
â”‚       â”œâ”€â”€ persistence/     # Database implementations
â”‚       â”œâ”€â”€ web/             # Web framework setup
â”‚       â”œâ”€â”€ services/        # External service implementations
â”‚       â”œâ”€â”€ logger/          # Logging implementations
â”‚       â””â”€â”€ container/       # Dependency injection
â”œâ”€â”€ configs/                 # Configuration files
â”œâ”€â”€ migrations/              # Database migrations
â”œâ”€â”€ tests/                   # Test files
â”œâ”€â”€ api/                     # API documentation
â””â”€â”€ scripts/                 # Utility scripts
```

## ğŸ› ï¸ Getting Started

### Prerequisites

- Go {{.GoVersion}}+
{{if ne .DatabaseDriver ""}}
- {{.DatabaseDriver | title}} database
{{end}}
- Make (optional)

### Installation

1. **Clone the repository**
   ```bash
   git clone <repository-url>
   cd {{.ProjectName}}
   ```

2. **Install dependencies**
   ```bash
   go mod download
   ```

3. **Set up environment variables**
   ```bash
   cp .env.example .env
   # Edit .env with your configuration
   ```

{{if ne .DatabaseDriver ""}}
4. **Set up the database**
   ```bash
   # Create database
   {{if eq .DatabaseDriver "postgres"}}
   createdb {{.ProjectName}}
   {{else if eq .DatabaseDriver "mysql"}}
   mysql -u root -p -e "CREATE DATABASE {{.ProjectName}};"
   {{end}}
   
   # Run migrations
   make migrate-up
   ```
{{end}}

5. **Run the application**
   ```bash
   # Development mode
   make dev
   
   # Or directly with go
   go run cmd/server/main.go
   ```

## ğŸ”§ Configuration

The application uses a hierarchical configuration system:

1. **Default values** (in code)
2. **Configuration files** (`configs/config.dev.yaml`, etc.)
3. **Environment variables** (highest priority)

### Environment Variables

```bash
# Server
PORT=8080
ENVIRONMENT=development

{{if ne .DatabaseDriver ""}}
# Database
DB_HOST=localhost
DB_PORT={{if eq .DatabaseDriver "postgres"}}5432{{else if eq .DatabaseDriver "mysql"}}3306{{end}}
DB_NAME={{.ProjectName}}
DB_USER={{.ProjectName}}
DB_PASSWORD=password
{{end}}

{{if ne .AuthType ""}}
# Authentication
JWT_SECRET=your-super-secret-jwt-key
{{end}}

# Email
SMTP_HOST=localhost
SMTP_USER=user
SMTP_PASSWORD=password
```

## ğŸ“Š API Endpoints

### Health Checks
- `GET /health` - Application health status
- `GET /ready` - Readiness probe (Kubernetes)
- `GET /live` - Liveness probe (Kubernetes)

{{if ne .DatabaseDriver ""}}
### Users
- `POST /api/v1/users` - Create user
- `GET /api/v1/users` - List users (paginated)
- `GET /api/v1/users/{id}` - Get user by ID
- `PUT /api/v1/users/{id}` - Update user
- `DELETE /api/v1/users/{id}` - Delete user
{{end}}

{{if ne .AuthType ""}}
### Authentication
- `POST /api/v1/auth/login` - User login
- `POST /api/v1/auth/refresh` - Refresh access token
- `POST /api/v1/auth/logout` - Logout current session
- `POST /api/v1/auth/logout-all` - Logout all sessions
- `GET /api/v1/auth/me` - Get current user info
{{end}}

## ğŸ§ª Testing

```bash
# Run all tests
make test

# Run tests with coverage
make test-coverage

# Run integration tests
make test-integration

# Run specific test package
go test -v ./internal/domain/usecases/...
```

## ğŸ³ Docker

```bash
# Build Docker image
make docker-build

# Run with Docker Compose
docker-compose up -d

# Run tests in Docker
make docker-test
```

## ğŸš€ Deployment

### Production Build

```bash
# Build optimized binary
make build-prod

# Or build for multiple platforms
make build-all
```

### Environment Setup

1. **Production Configuration**
   ```bash
   # Use production config
   export ENVIRONMENT=production
   ```

2. **Security**
   - Set strong JWT secret
   - Configure TLS certificates
   - Set up proper CORS origins
   - Enable security headers

## ğŸ“ˆ Clean Architecture Benefits

### âœ… **Testability**
- Business logic is isolated and easily testable
- Dependencies are mocked through interfaces
- Fast unit tests without external dependencies

### âœ… **Maintainability**  
- Clear separation of concerns
- Changes in one layer don't affect others
- Easy to understand and modify

### âœ… **Framework Independence**
- Business logic doesn't depend on frameworks
- Easy to swap web frameworks or databases
- Future-proof architecture

### âœ… **Database Independence**
- Repository pattern abstracts database access
- Easy to switch between different databases
- Business logic remains unchanged

## ğŸ”„ Development Workflow

1. **Add Business Logic** â†’ Entities & Use Cases
2. **Define Contracts** â†’ Ports (interfaces)
3. **Implement Infrastructure** â†’ Repository, Services
4. **Add Web Layer** â†’ Controllers, Presenters
5. **Wire Dependencies** â†’ Container
6. **Test Everything** â†’ Unit & Integration tests

## ğŸ“š Resources

- [Clean Architecture by Uncle Bob](https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html)
- [Domain-Driven Design](https://domainlanguage.com/ddd/)
- [Dependency Inversion Principle](https://en.wikipedia.org/wiki/Dependency_inversion_principle)

## ğŸ¤ Contributing

1. Fork the repository
2. Create a feature branch
3. Follow Clean Architecture principles
4. Add tests for new features
5. Submit a pull request

## ğŸ“„ License

This project is licensed under the {{.License}} License - see the [LICENSE](LICENSE) file for details.

---

**Built with â¤ï¸ using Clean Architecture principles**